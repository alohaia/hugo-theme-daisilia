{{- $u := urls.Parse .Destination -}}
{{- if hasPrefix .Destination "#" -}} {{- /* anchor */ -}}
  <a href="#{{ .Destination | anchorize }}"{{ with .Title }} title="{{ . }}"{{ end }}>{{ .Text | urls.PathUnescape }}</a>
{{- else -}}
  {{- if or (hasPrefix .Destination site.BaseURL) (hasPrefix .Destination "/")
      | or (or (hasPrefix .Destination "./") (hasPrefix .Destination "../"))
      | or (hasPrefix .Destination "HAHAHUGOSHORTCODE")
  -}} {{- /* internal URL */ -}}
    <a href="{{ .Destination }}" class="page" {{ with .Title }} title="{{ . }}"{{ end }}>{{ .Text | urls.PathUnescape }}</a>
  {{- else -}} {{- /* external URL */ -}}
    <a href="{{ .Destination }}"{{ with .Title }} title="{{ . }}"{{ end }} target="_blank" rel="external">{{ .Text | urls.PathUnescape }}</a>
  {{- end -}}
{{- end -}}
{{- /* vim:set ft=gohtmltmpl ts=2 sw=2: */ -}}
