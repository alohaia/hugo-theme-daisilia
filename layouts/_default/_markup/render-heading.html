<h{{ .Level }} class="heading{{ with .Attributes.class }} {{ . }}{{ end }}" {{- range $a,$v := .Attributes -}}{{ if or (ne $a "id") (in $.Attributes.class "item" | not) }}{{ $a }}="{{ $v }}"{{ end }}{{ end -}}>
  <a href="#{{ .Anchor }}">{{ .Text | safeHTML }}</a> {{- /* .Text is renered HTML link text */ -}}
  {{- with .Attributes.alias -}}<span class="heading-aliases">{{ range (split . " ") }}<span class="heading-alias">{{ replace . "\\_" " " | markdownify }}</span>{{ end }}</span>{{ end -}}
</h{{ .Level }}>
{{- if and site.Data.refs .Page.File -}}
{{- if index site.Data.refs .Page.File.Path -}}
{{- if index (index site.Data.refs .Page.File.Path).link_here .Anchor -}}
<div class="cross-refs">
  {{- range $v,$c := index (index site.Data.refs .Page.File.Path).link_here .Anchor -}}
  <a class='cross-ref'{{ if gt $c 1 }} style="order:-{{$c}}"{{ end }} href="{{ replaceRE "\\s+" "-" (relref $.Page $v | lower) }}">{{ index (last 1 (split $v "/")) 0 }}</a>
  {{- end -}}
</div>
{{- end -}}
{{- end -}}
{{- end -}}
{{- /* vim:set ft=gohtmltmpl ts=2 sw=2: */ -}}
